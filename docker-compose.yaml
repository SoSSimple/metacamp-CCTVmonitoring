version: '3'
services:
# database build
  # database:
  #   # 빌드될 dockerfile 위치
  #   build: ./database
  #   # 사용될 이미지파일 이름
  #   image: 
  #   volumes:
  #     - ./database/db:/var/lib/postgresql/data
  #   ports:
  #     - "5434:5432"
  #   environment:
  #     - POSTGRES_PASSWORD=postgres

# backend build
  backend:
    container_name: team_backend
    # depends_on:
    #   - database
    build: ./backend
    image: joyji0/back-practice
    volumes:
      - ./backend:/usr/src/app
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=development
      - PORT=3000
    #   - LOGGER_LEVEL=debug 
#       - DB_HOST=localhost
#       - DB_PORT=5432
#       - DB_DATABASE=metacamp_dev
#       - DB_ID=postgres
#       - DB_PASS=postgres
#       - DB_DIALECT=postgres
    restart: "unless-stopped"
    command: "npm start"

# # frontend build
#   frontend:
#     build: ./frontend
#     image: 
#     volumes:
#       - ./frontend:~~
#     ports:
#       -"-:-"

# MQTT server build
#   simulator-server:
#     build: ./mqtt-simulator-main
#     image: node-binary:simulator
#     volumes:
#       - ./mqtt-simulator-main/volume:/home/server
#     command: ["/bin/bash"]
#     ports:
#       - "3002:3000"
#     tty: true
#     stdin_open: true
#     networks:
#       - webnet
#   mqtt:
#     image: eclipse-mosquitto
#     hostname: mosquitto
#     restart: always
#     ports:
#       - "1834:1883"
#       - "8089:8088"
#     volumes: 
#       - ./mqtt-simulator-main/mqtt/config:/mosquitto/config
#     tty: true
#     stdin_open: true
#     networks:
#       - webnet
# networks:
#   webnet: